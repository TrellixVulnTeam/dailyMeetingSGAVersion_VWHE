{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service\";\nimport * as i2 from \"../users-list.service\";\nexport let InitializationComponent = /*#__PURE__*/(() => {\n  class InitializationComponent {\n    constructor(service, userlistservice) {\n      this.service = service;\n      this.userlistservice = userlistservice;\n    } // présente le boutton permettant d'initaliser le meeting\n    // au clic: vérifie en bdd la présence ou non d'un meeting pour la date du jour\n    // si oui => route vers user-list-component\n    // si non => crée le meeting en bdd et lance la fonction d'initialisation de la usersMeetingList\n\n\n    ngOnInit() {\n      // to test if the meeting has been created\n      this.service.getLastMeeting().subscribe(lastMeeting => {\n        let lastMeetingDate = new Date(lastMeeting.date).toISOString().substring(0, 10);\n        console.log(lastMeetingDate); // comparison date of the day with date of the last meeting\n\n        let today = new Date();\n        let dateOfTheDay = today.getFullYear() + '-' + (\"0\" + (today.getMonth() + 1)).slice(-2) + '-' + today.getDate();\n        console.log(dateOfTheDay);\n\n        if (lastMeetingDate == dateOfTheDay) {\n          location.assign('http://localhost:4200/meeting/');\n        }\n      });\n    }\n\n    initMeeting() {\n      // todo régler l'issue lorsque deux utilisateurs cliquent en même temps sur la fonction de création d'un meeting;\n      // @ts-ignore\n      this.service.createMeeting({\n        \"date\": new Date(Date.now())\n      }).subscribe();\n      location.assign('http://localhost:4200/meeting/');\n    }\n\n  }\n\n  InitializationComponent.ɵfac = function InitializationComponent_Factory(t) {\n    return new (t || InitializationComponent)(i0.ɵɵdirectiveInject(i1.Service), i0.ɵɵdirectiveInject(i2.UsersListService));\n  };\n\n  InitializationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InitializationComponent,\n    selectors: [[\"app-initialization\"]],\n    decls: 12,\n    vars: 0,\n    consts: [[\"rel\", \"stylesheet\", \"href\", \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\", \"integrity\", \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", \"crossorigin\", \"anonymous\"], [1, \"initBox\"], [1, \"mb-5\"], [1, \"text-center\", \"mb-1\"], [1, \"initButton\", \"bg-light\", 3, \"click\"]],\n    template: function InitializationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"head\");\n        i0.ɵɵelement(1, \"link\", 0);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"body\");\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtext(6, \"Welcome to\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"h5\");\n        i0.ɵɵtext(8, \"Daily Meeting Application\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\");\n        i0.ɵɵelementStart(10, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function InitializationComponent_Template_button_click_10_listener() {\n          return ctx.initMeeting();\n        });\n        i0.ɵɵtext(11, \"Create a meeting\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\".initBox[_ngcontent-%COMP%]{height:300px;width:500px;background-color:#671e75;display:flex;margin-top:100px;margin-left:auto;margin-right:auto;align-items:center;border:2px solid #000000;flex-direction:column;justify-content:center;color:#fff}.initButton[_ngcontent-%COMP%]{width:300px;height:75px;border:2px solid #000000;box-sizing:border-box;box-shadow:0 4px 4px #00000040;font-size:medium}#logoMeeting[_ngcontent-%COMP%]{height:75px}\"]\n  });\n  return InitializationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}